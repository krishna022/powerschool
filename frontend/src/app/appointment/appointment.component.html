<app-header></app-header>
<div class="container-fluid">

    <div *ngIf="show_alert" [ngClass]="{ 'alert': message, 'alert-success': message.type === 'success', 'alert-danger': message.type === 'error' }">
        <ul class="list-inline mb-0" style="float: right;">
        <li><a data-action="close"><i class="feather ft-x" (click)="close_alert()"></i></a></li>
        </ul>{{message.text}}
    </div>

    <div class="card filterBox">
        <div class="card-body">
    <div class="row">
      <div class="col-md-8">
        <form class="form-horizontal" (ngSubmit)="onAppointmentFilter()" [formGroup]="filterForm" autocomplete="off">
            <div class="row">
                <div class="col-md-5">
                    <div class="form-group">
                        <label>Users <span class="required">*</span></label>
                        <select class="form-control form-select" formControlName="userId">
                          <option value="">All Users</option>
                          <option value="{{item._id}}" *ngFor="let item of users">{{item.name}}</option>
                      </select>
                    </div>
                </div>
                <div class="col-md-5">
                    <label>Date <span class="required">*</span></label>
                    <input type="date" class="form-control" formControlName="date"/>
                </div>
                <div class="col-md-2">
                    <button class="btn btn-success my-2 my-sm-0" type="submit" style="margin-top: 23px !important;">Filter</button>
                </div>
            </div> 
        </form>
      </div>
      <div class="col-md-4">
        <button class="btn btn-primary my-2 my-sm-0 right" type="button" (click)="openModal(false)">Add New</button>
      </div>
    </div>
    </div>
   </div>

    <div class="card" *ngIf="!fetching">
        <div class="card-body">
            <table class="table table-striped" *ngIf="appointments?.length > 0">
                <thead class="thead-dark">
                  <tr>
                    <th scope="col">#</th>
                    <th scope="col">Title</th>
                    <th scope="col">Date</th>
                    <th scope="col">Time</th>
                    <th scope="col">Status</th>
                    <th scope="col">Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let item of appointments; let i = index">
                    <th scope="row">{{i+1}}</th>
                    <td>{{item.title}}</td>
                    <td>{{item.date}}</td>
                    <td>{{item.start_time | date: 'hh:mm a'}} - {{item.end_time | date: 'hh:mm a'}}</td>
                    <td>{{item.status}}</td>
                    <td>
                        <button class="btn btn-outline-success my-2 my-sm-0" type="button" (click)="update(item)">Update</button>
                        <button class="btn btn-outline-danger my-2 my-sm-0" type="button" (click)="delete(item)">Delete</button>
                    </td>
                  </tr>
                </tbody>
              </table>
              <p *ngIf="appointments?.length == 0">No Data Found</p>
        </div>
    </div>

    <p *ngIf="fetching" style="text-align: center; margin-top:30px;">Loading...</p>


</div>

